<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Từ chối tham dự</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      min-height:100vh;
      background:radial-gradient(circle,#111 0%,#000 70%);
      font-family:'Montserrat',sans-serif;
      color:#f5e8c8;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .box{
      max-width:420px;
      width:100%;
      padding:30px;
      border-radius:20px;
      border:1px solid rgba(255,215,120,.35);
      background:rgba(255,255,255,.03);
      text-align:center;
      box-shadow:0 0 40px rgba(255,215,120,.25);
      animation:fade .8s ease;
    }
    @keyframes fade{from{opacity:0;transform:translateY(15px)}to{opacity:1}}
    h1{
      font-family:'Playfair Display',serif;
      color:#f5d98b;
      margin-bottom:20px;
      letter-spacing:2px;
    }
    input,textarea,button{
      width:100%;
      padding:12px 14px;
      margin-bottom:14px;
      border-radius:10px;
      border:1px solid rgba(255,215,120,.35);
      background:rgba(0,0,0,.5);
      color:#f5e8c8;
      font-family:'Montserrat';
    }
    textarea{resize:none;height:90px}
    button{
      cursor:pointer;
      font-weight:500;
      letter-spacing:2px;
      background:rgba(255,215,120,.12);
      transition:.3s;
    }
    button:hover{
      background:rgba(255,215,120,.25);
      box-shadow:0 0 25px rgba(255,215,120,.6);
    }
    .info{
      margin-top:20px;
      font-size:12px;
      opacity:.7;
      line-height:1.6;
    }
  </style>
</head>

<body>

<div class="box">
  <h1>KHÔNG THAM DỰ</h1>

  <form id="form">
    <input type="text" id="name" placeholder="Họ tên" required>
    <textarea id="decline-note" placeholder="Lý do (không bắt buộc)"></textarea>
    <button type="submit">XÁC NHẬN</button>
  </form>

  <div class="info">
    Duy Anh<br>
    038993212<br>
    pdan070728@gmail.com
  </div>
</div>

<script>
(function(){
  emailjs.init("oY8uUtdvgKbfQPvH1");
})();

document.getElementById("form").addEventListener("submit", function(e){
  e.preventDefault();

  let name = document.getElementById("name").value.trim();
  let note = document.getElementById("decline-note").value.trim();

  if(!note) note = "Không có ghi chú";

  const data = {
    name: name,
    note: note,
    status: "KHÔNG THAM DỰ",
    time: new Date().toLocaleString("vi-VN")
  };

  emailjs.send("service_9v1yoa8","template_lkkolei", data)
    .then(() => {
      alert("Đã gửi phản hồi!");
      window.location.href = "thanks.html";
    })
    .catch((error) => {
      console.log("EmailJS error:", error);
      alert("Lỗi gửi mail!");
    });
});
</script>

</body>
</html>
